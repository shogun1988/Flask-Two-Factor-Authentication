{% extends "_base.html" %}
{% block content %}
<div class="row">
  <div class="col-md-4"></div>
  <div class="col-md-4">
    <main class="form-signin w-100 m-auto">
      <form role="form" method="post" action="">
        {{ form.csrf_token }}
        <h1 class="h5 mb-3 fw-normal text-center">Forgot Password</h1>
        <p class="text-muted small">Enter your username. If it exists, a reset link will be generated.</p>
        <div class="form-floating">
          {{ form.username(placeholder="username", class="form-control mb-2") }}
          {{ form.username.label }}
          {% if form.username.errors %}
            {% for error in form.username.errors %}
              <div class="alert alert-danger" role="alert">{{ error }}</div>
            {% endfor %}
          {% endif %}
        </div>
        <button class="w-100 btn btn-sm btn-primary" type="submit">Generate Reset Link</button>
        <p class="text-center mt-3"><a href="{{ url_for('accounts.login') }}">Back to login</a></p>
      </form>
      {% if reset_link %}
        <div class="alert alert-success mt-3" role="alert">
          <strong>Reset Link:</strong><br>
          <code style="font-size:0.8rem; word-break: break-all;">{{ reset_link }}</code>
          <p class="mt-2 mb-0 small">In a production app, this would be emailed instead of shown.</p>
        </div>
      {% endif %}
    </main>
  </div>
  <div class="col-md-4"></div>
</div>
{% endblock %}
